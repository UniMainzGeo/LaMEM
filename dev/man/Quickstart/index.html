<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Quick start · LaMEM</title><meta name="title" content="Quick start · LaMEM"/><meta property="og:title" content="Quick start · LaMEM"/><meta property="twitter:title" content="Quick start · LaMEM"/><meta name="description" content="Documentation for LaMEM."/><meta property="og:description" content="Documentation for LaMEM."/><meta property="twitter:description" content="Documentation for LaMEM."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../Home/">LaMEM</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../Home/">Home</a></li><li class="is-active"><a class="tocitem" href>Quick start</a><ul class="internal"><li><a class="tocitem" href="#Directory-structure"><span>Directory structure</span></a></li><li><a class="tocitem" href="#2.-Download-and-build-LaMEM"><span>2. Download and build LaMEM</span></a></li><li><a class="tocitem" href="#2.1-Using-pre-compiled-binaries"><span>2.1 Using pre-compiled binaries</span></a></li><li><a class="tocitem" href="#2.2-Compiling-it-yourself"><span>2.2 Compiling it yourself</span></a></li><li><a class="tocitem" href="#3.-Getting-started"><span>3. Getting started</span></a></li><li><a class="tocitem" href="#4.-Development-team"><span>4. Development team</span></a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../GettingStarted/">Getting Started</a></li><li><a class="tocitem" href="../InitialModelSetup/">Initial Model setup</a></li></ul></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="../LaMEM_Development/">LaMEM Development</a></li><li><a class="tocitem" href="../Debugging/">LaMEM Debugging</a></li></ul></li><li><a class="tocitem" href="../CODE_OF_CONDUCT/">Code of conduct</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Quick start</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Quick start</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/UniMainzGeo/LaMEM" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/UniMainzGeo/LaMEM/blob/master/docs/src/man/Quickstart.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="LaMEM-_-Lithosphere-and-Mantle-Evolution-Model"><a class="docs-heading-anchor" href="#LaMEM-_-Lithosphere-and-Mantle-Evolution-Model">LaMEM _ Lithosphere and Mantle Evolution Model</a><a id="LaMEM-_-Lithosphere-and-Mantle-Evolution-Model-1"></a><a class="docs-heading-anchor-permalink" href="#LaMEM-_-Lithosphere-and-Mantle-Evolution-Model" title="Permalink"></a></h1><p>LaMEM is a parallel 3D numerical code that can be used to model various thermomechanical  geodynamical processes such as mantle-lithosphere interaction for rocks  that have visco-elasto-plastic rheologies. It was developed to better understand geological  processes, particularly related to the dynamics of the crust and  lithosphere and their  interaction with the mantle. It can, however, also be used to solve geomechanical problems, includes (compressible) poroelasticity, can be used to compute gravity anomalies and has an (adjoint) inversion framework. The code uses a marker-in-cell approach with a staggered finite difference discretization and is build on top of PETSc such that it can run on anything from a laptop to a massively parallel machine. </p><p>A range of (Galerkin) multigrid and iterative solvers are available, for both linear and non-linear rheologies, using Picard and  quasi-Newton solvers (provided through the PETSc interface).</p><p>LaMEM has been tested on a variety of machines ranging from laptops to a massively parallel cluster with 458&#39;752 cores.</p><h2 id="Directory-structure"><a class="docs-heading-anchor" href="#Directory-structure">Directory structure</a><a id="Directory-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Directory-structure" title="Permalink"></a></h2><p>LaMEM consists of the following directories:</p><pre><code class="nohighlight hljs">/bin          -  Contains binaries after compilation (/deb contains the debug version and /opt the optimized)
/docs         -  Some documentation and the current webpage
/input_models -  Various input models (run with ../bin/LaMEM -ParamFile *.dat). See the README file in that directory.
/matlab       -  Various matlab files to change initial mesh and read binary output into matlab. [n]
/scripts      -	 Various scripts, currently mainly related to Paraview VTK files.
/src          -	 LaMEM source code; compile with &quot;make mode=opt all&quot; and &quot;make mode=deb all&quot;
/test         -	 Directory with the testing framework. 
/utils        -	 Various non-essential files.</code></pre><h2 id="2.-Download-and-build-LaMEM"><a class="docs-heading-anchor" href="#2.-Download-and-build-LaMEM">2. Download and build LaMEM</a><a id="2.-Download-and-build-LaMEM-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Download-and-build-LaMEM" title="Permalink"></a></h2><p>You can download pre-compiled binaries of LaMEM and directly use it (also in parallel), through the <a href="https://github.com/JuliaGeodynamics/LaMEM.jl">LaMEM julia</a> package, as explained below. You can also compile LaMEM manually to get the latest update of the code.</p><p>For changing input files, logging in to remote machines etc. etc, we recommend <a href="https://code.visualstudio.com">Visual Studio Code</a>, along with the remoteSSH and julia plugins.</p><h2 id="2.1-Using-pre-compiled-binaries"><a class="docs-heading-anchor" href="#2.1-Using-pre-compiled-binaries">2.1 Using pre-compiled binaries</a><a id="2.1-Using-pre-compiled-binaries-1"></a><a class="docs-heading-anchor-permalink" href="#2.1-Using-pre-compiled-binaries" title="Permalink"></a></h2><p>The recommended way to install LaMEM on your machine (windows/mac/linux) is to use the julia package manager. For this download a recent version of <a href="https://julialang.org">julia</a>, and start it.</p><pre><code class="language-julia hljs">julia&gt;]
pkg&gt; add LaMEM
pkg&gt; test LaMEM</code></pre><p>Once this is installed, you can use it from within julia with:</p><pre><code class="language-julia hljs">julia&gt; using LaMEM</code></pre><p>(Note: use the backspace to go back from the package manager to the julia REPL.) Running a simulation can be done with</p><pre><code class="language-julia hljs">julia&gt; ParamFile=&quot;../../input_models/BuildInSetups/FallingBlock_Multigrid.dat&quot;;
julia&gt; run_lamem(ParamFile, 2, &quot;-nstep_max = 1&quot;)</code></pre><p>This will run the simulation on 2 processors for 1 timestep.  You do have to make sure that the path to the input <code>*.dat</code> file is correct in your system.  Most likely you will have to change the path, which can be done with the build-in terminal (or PowerShell) in julia:</p><pre><code class="language-julia hljs">julia&gt;; 
shell&gt; cd ~/WORK/LaMEM/input_models/BuildInSetups/</code></pre><p>If you wish, you can also directly run the downloaded binaries from your terminal without using julia. In that case you&#39;ll need to set the correct paths to the required binaries (<code>LaMEM</code>,<code>mpiexec</code>) and required dynamic libraries, which you can show with:</p><pre><code class="language-julia hljs">julia&gt; show_paths_LaMEM()
LaMEM &amp; mpiexec executables path : /Users/kausb/.julia/artifacts/26630bc992637321a5e5d3c0bc66005163370db6/bin:/Users/kausb/.julia/artifacts/483cb6f025b5a8266429afcb3f4ad498c58aaaee/bin
Dynamic libraries                : /Applications/Julia-1.7.app/Contents/Resources/julia/lib/julia:</code></pre><p>The <a href="https://github.com/JuliaGeodynamics/LaMEM.jl">LaMEM</a> julia package has a number of other functions that may come in handy, such as reading timesteps back into julia. </p><p>If you want test some of the LaMEM examples in this repository, either clone the repo (below) or download it (three dots at the top of this page).</p><p><strong>Limitations</strong>  Whereas the pre-build libraries are quite handy, there are some limitations:</p><ul><li>On Windows the MUMPS parallel direct solver is not available. SuperLU_dist does work, so we recommend using that instead.</li><li>On Mac, the current compilation of SuperLU<em>dist does not seem to work, so use MUMPS instead. Linux has both SuperLU</em>dist &amp; MUMPS available.</li></ul><h2 id="2.2-Compiling-it-yourself"><a class="docs-heading-anchor" href="#2.2-Compiling-it-yourself">2.2 Compiling it yourself</a><a id="2.2-Compiling-it-yourself-1"></a><a class="docs-heading-anchor-permalink" href="#2.2-Compiling-it-yourself" title="Permalink"></a></h2><p>If want, you can ofcourse also compile LaMEM yourself, which will give you the latest version of the code. On large HPC clusters, this is often necessary as you need to link PETSc to the optimized MPI implementation on that system. </p><h3 id="2.2.1-Main-dependencies"><a class="docs-heading-anchor" href="#2.2.1-Main-dependencies">2.2.1 Main dependencies</a><a id="2.2.1-Main-dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#2.2.1-Main-dependencies" title="Permalink"></a></h3><p>LaMEM crucially relies on:</p><ul><li>PETSc 3.18.x, ideally installed with the external packages SUPERLU_DIST, MUMPS and PASTIX.</li></ul><p>and to a minor extend on:</p><ul><li>Python, to run the LaMEM testing environment, and see if things work as expected. </li><li>Paraview, to visualize results.</li><li>GIT, in order to pull the latest version of LaMEM</li><li>MATLAB (version not important), in order to facilitate creating more complicated input geometries</li><li>geomIO, to create input geometries from Inkscape (see https://geomio.bitbucket.io) </li><li>Any text editor, to modify the LaMEM input files. </li></ul><h3 id="2.2.2-Dependency-installation"><a class="docs-heading-anchor" href="#2.2.2-Dependency-installation">2.2.2 Dependency installation</a><a id="2.2.2-Dependency-installation-1"></a><a class="docs-heading-anchor-permalink" href="#2.2.2-Dependency-installation" title="Permalink"></a></h3><p>We develop LaMEM on Linux and Mac machines, but we also have had success on Windows 10, where we recommend installing it through the (new) bash shell. In order for LaMEM to work, you&#39;ll need to install the correct version of PETSc first. PETSc is usually not backwards compatible, so it won&#39;t work with the incorrect version. Also please note that we do not always immediately update LaMEM to the latest version of PETSc, so you may have to download/install an older version.</p><ul><li><p>PETSc:     See http://www.mcs.anl.gov/petsc/petsc-as/documentation/installation.html    for installation instructions. We also provide some installation instructions on how to compile     PETSc (and mpich, gcc, as well as PETSc) on various machines in /doc/installation. The simplest manner is sometimes to let PETSc install all additional packages (like MPICH), but that often does not result in the most efficient code. You also have to make sure that the path is set correctly in that case (for MPICH, for example). On a large scale cluster, you will have to link against the cluster libraries (for MPI, for example).</p></li><li><p>If you want to do debugging of LaMEM as well, it is a good idea to install both a DEBUG and an OPTIMIZED version of PETSc, in separate directories.</p></li><li><p>Nothing else - if the correct version of PETSc is installed, LaMEM will work fine.</p></li></ul><h3 id="2.2.3-Install-LaMEM"><a class="docs-heading-anchor" href="#2.2.3-Install-LaMEM">2.2.3 Install LaMEM</a><a id="2.2.3-Install-LaMEM-1"></a><a class="docs-heading-anchor-permalink" href="#2.2.3-Install-LaMEM" title="Permalink"></a></h3><ul><li>Download LaMEM from GitHub, preferable by using GIT on your system:</li></ul><pre><code class="nohighlight hljs">        $ git clone https://github.com/UniMainzGeo/LaMEM.git ./LaMEM</code></pre><ul><li>Set the environment variables in your .bashrc or .bash_profile scripts such that the LaMEM makefile knows where to look for PETSc:</li></ul><pre><code class="nohighlight hljs">        export PETSC_OPT=DIRECTORY_WHERE_YOU_INSTALLED_YOUR_OPTIMIZED_PETSC
        export PETSC_DEB=DIRECTORY_WHERE_YOU_INSTALLED_YOUR_DEBUG_PETSC </code></pre><ul><li>To build the source in the /src directory:</li></ul><pre><code class="nohighlight hljs">        $ make mode=opt all </code></pre><ul><li>Once build, you can verify that LaMEM works correctly with:</li></ul><pre><code class="nohighlight hljs">        $ cd /tests
        $ make test</code></pre><p>Note that we use the PythonTestHarness framework, which is a set of Python scripts that simplify regression testing (developed by Dave May and Patrick Sanan). The first time you run the makefile, it will download the git repository and put it in the directory <code>./pythontestharness</code>. If this fails for some reason, you can download it directly from the Dave&#39;s bitbucket repository and put it in the directory. In that case, it will ask you which batch queuing system to use, which should be <code>&lt;none&gt;</code>.	</p><p>Ideally, the tests should run all with no problems. Depending on which external direct solver packages you installed, some may fail (for example, if you did not install PASTIX). The python test harness will give some hints as where the issues came from.  </p><p>In case you happen to have MATLAB installed on your system, additional tests will be performed in which an input setup is generated from within MATLAB. In order for this to work, you will have to let the system know where the MATLAB-binary is located by setting the following environmental variable (which can also be set in your .bashrc file):</p><pre><code class="nohighlight hljs">        $ which matlab
        /path_to_your_matlab_library/matlab
        $ export MATLAB=/path_to_your_matlab_library/matlab
        $ make test</code></pre><p>Note that you can look at the <code>tests</code> directory contains subdirectories that are named: <code>t?_***</code> (for example <code>./t1_FB1_Direct/</code> which contains a test for a Falling Block setup). Within each of these directories you will find a working LaMEM input file (<code>*.dat</code>), and a python file that runs the actual tests in that directory (such as <code>test_1_FB1.py</code>). Have a look at these files to learn more on how to run LaMEM.</p><h2 id="3.-Getting-started"><a class="docs-heading-anchor" href="#3.-Getting-started">3. Getting started</a><a id="3.-Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Getting-started" title="Permalink"></a></h2><h3 id="3.1-First-simulation"><a class="docs-heading-anchor" href="#3.1-First-simulation">3.1 First simulation</a><a id="3.1-First-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#3.1-First-simulation" title="Permalink"></a></h3><p>You can run your first LaMEM simulation with </p><pre><code class="nohighlight hljs">      $ cd /input_models/BuildInSetups
      $ ../../bin/opt/LaMEM -ParamFile FallingBlock_IterativeSolver.dat</code></pre><p>which will run a setup that has a falling block of higher density embedded in a lower density fluid for 10 timesteps.     Run the same in parallel with:</p><pre><code class="nohighlight hljs">     $ mpiexec -n 4 ../../bin/opt/LaMEM -ParamFile FallingBlock_IterativeSolver.dat</code></pre><p>You can visualize the results with Paraview by opening the file <code>FB_iterative.pvd</code>, and pushing the play button (after selecting the appropriate view, such as surface and the appropriate field such as velocity).</p><p>You can change the input parameters (such as resolution) by opening the file <code>FallingBlock_IterativeSolver.dat</code> with a texteditor and changing the parameters.</p><h3 id="3.2-Learning-more"><a class="docs-heading-anchor" href="#3.2-Learning-more">3.2 Learning more</a><a id="3.2-Learning-more-1"></a><a class="docs-heading-anchor-permalink" href="#3.2-Learning-more" title="Permalink"></a></h3><p>You can also look at the <a href="https://unimainzgeo.github.io/LaMEM/dev/man/Home/">User Guide</a>. This website also contains more extensive documentation on how to use LaMEM.</p><p>The best way to learn LaMEM is by looking at the input files in the order that is recommended in the README files. Start with <code>/BuildInSetups</code>, which shows various example with geometries that are specified in the LaMEM input file. </p><p>All possible input parameters in LaMEM are listed in the file <code>/input_models/input/lamem_input.dat</code>, which is worthwhile having a look at. Note that not all of these parameters have to be set (we select useful default options in most cases). </p><h2 id="4.-Development-team"><a class="docs-heading-anchor" href="#4.-Development-team">4. Development team</a><a id="4.-Development-team-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Development-team" title="Permalink"></a></h2><p>The main developers of the current version are:</p><ul><li>Anton Popov         (Johannes Gutenberg University Mainz, popov@uni-mainz.de), 2011-</li><li>Boris Kaus          (JGU Mainz, kaus@uni-mainz.de), 2011-</li><li>Tobias Baumann      (JGU Mainz), 2011-</li><li>Georg Reuber        (JGU Mainz), 2015-	</li><li>Adina Puesoek       (JGU Mainz, UC San Diego), 2012-</li><li>Naiara Fernandez    (JGU Mainz), 2011-2014</li><li>Arthur Bauville     (JGU Mainz), 2015</li><li>Andrea Piccolo      (JGU Mainz), 2015-</li><li>Beatriz Montesinos  (JGU Mainz), 2015-</li><li>Maximilian Kottwitz (JGU Mainz), 2019-</li><li>Arne Spang          (JGU Mainz), 2019-</li><li>Garrett Ito          (University Hawaii), 2021-</li><li>Jana Schierjott     (University Hawaii), 2020-</li></ul><p>Older versions of LaMEM included a finite element solver as well,  and were developed by:</p><ul><li>Boris J.P. Kaus (ETH Zurich, Switzerland). 2007-2011</li><li>Dave A. May     (ETH Zurich, Switzerland). 2009-2011</li></ul><p>Development work was supported by the European Research Council,  with ERC Starting Grant 258830, ERC Proof of Concept Grant 713397 and ERC Consolidator Grant 771143, as well as by BMBF projects SECURE and PERMEA awarded to Boris Kaus. </p><p>LaMEM is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p><p>LaMEM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with LaMEM. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Home/">« Home</a><a class="docs-footer-nextpage" href="../Installation/">Installation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Friday 31 October 2025 12:44">Friday 31 October 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
