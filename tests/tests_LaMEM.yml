environment:
  - PWD
  
tests:
  # THIS IS THE TESTING SUITE OF LaMEM, using SciATH

  # FALLING BLOCKS TEST:
  - name: t1_FB1_a_Direct_opt
    ranks: 1
    command:  
      - HERE/../bin/opt/LaMEM -ParamFile HERE/t1_FB1_Direct/FallingBlock_mono_PenaltyDirect.dat
    expected: ./t1_FB1_Direct/FB1_a_Direct_opt-p1.expected
    type: float_lines
    rules:
        - key:  |Div|_inf
          atol: 1e-7
        - key:  |Div|_2
          atol: 1e-5
        - key:  |mRes|_2
          atol: 1e-4
  - name: t1_FB1_a_Direct_deb
    ranks: 1
    command:  HERE/../bin/deb/LaMEM -ParamFile HERE/t1_FB1_Direct/FallingBlock_mono_PenaltyDirect.dat
    expected: ./t1_FB1_Direct/FB1_b_Direct_deb-p1.expected
    type: float_lines
    rules:
        - key:  |Div|_inf
          atol: 1e-7
        - key:  |Div|_2
          atol: 1e-5
        - key:  |mRes|_2
          atol: 1e-4
  - name: t1_FB1_c_MUMPS_opt
    ranks: 2
    command:  HERE/../bin/opt/LaMEM -ParamFile HERE/t1_FB1_Direct/FallingBlock_mono_PenaltyDirect.dat -jp_pc_factor_mat_solver_package mumps
    expected: ./t1_FB1_Direct/FB1_c_MUMPS_opt-p2.expected
    type: float_lines
    rules:
        - key:  |Div|_inf
          atol: 1e-7
        - key:  |Div|_2
          atol: 1e-5
        - key:  |mRes|_2
          atol: 1e-4
  -
    name: t1_FB1_d_PaStiX_opt
    ranks: 4
    command:  HERE/../bin/opt/LaMEM -ParamFile HERE/t1_FB1_Direct/FallingBlock_mono_PenaltyDirect.dat -jp_pc_factor_mat_solver_package pastix
    expected: ./t1_FB1_Direct/FB1_c_MUMPS_opt-p2.expected
    type: float_lines
    rules:
        - key:  |Div|_inf
          atol: 1e-7
        - key:  |Div|_2
          atol: 1e-5
        - key:  |mRes|_2
          atol: 1e-4
